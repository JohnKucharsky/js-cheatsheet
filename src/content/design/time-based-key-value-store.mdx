
## time based key-value store

```js
class TimeMap {
    constructor() {
        this.map = new Map();
    }

    set(key, value, timestamp) {
        if (!this.map.has(key)) {
            this.map.set(key, []);
        }
        this.map.get(key).push({ value, timestamp });
    }

    get(key, timestamp) {
        if (!this.map.has(key)) {
            return "";
        }

        const values = this.map.get(key);
        let left = 0;
        let right = values.length - 1;
        let result = "";

        while (left <= right) {
            const mid = Math.floor((left + right) / 2);
            if (values[mid].timestamp <= timestamp) {
                result = values[mid].value;
                left = mid + 1;
            } else {
                right = mid - 1;
            }
        }

        return result;
    }
}

const timeMap = new TimeMap();
timeMap.set("foo", "bar", 1);
// store the key "foo" and value "bar" along with timestamp = 1.
console.log(timeMap.get("foo", 1)); // return "bar"
console.log(timeMap.get("foo", 3));
// return "bar", since there is no value corresponding to foo
// at timestamp 3 and timestamp 2, then the only value is at
// timestamp 1 is "bar".
timeMap.set("foo", "bar2", 4);
// store the key "foo" and value "bar2" along with timestamp = 4.
console.log(timeMap.get("foo", 4)); // return "bar2"
console.log(timeMap.get("foo", 5)); // return "bar2"
```